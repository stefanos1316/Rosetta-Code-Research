#!/bin/bash

#\$1 -> Give the absolute path where the Performance_Results are located
if [ "$1" == "--help" ]; then
	echo ""
	echo "Usage for script.createDataForPerformance"
	exit
fi

array=()
for i in `ls $1`
do 
	horseLine=$i
	totalTime=0
	#Now we see all the tasks
	for j in `ls $1/$i`
	do
		echo "Task $i and file $j"
		getMinutes=$(grep 'user' $1/$i/$j | awk '{print $2}' | awk -F "m" '{print $1}')
		getSeconds=$(grep 'user' $1/$i/$j | awk '{print $2}' | awk -F "m" '{print $2}' | awk -F "." '{print $1}')
		getMinutes=$((getMinutes*60))
		totalTime=$((getMinutes+getSeconds))
		horseLine=$horseLine"--"$totalTime
	done	
	array+=($horseLine)
done

for each in "${array[@]}"
do
	echo $each >> Performance_Data.txt
done

sed -i 's/--/\t/g' Performance_Data.txt
