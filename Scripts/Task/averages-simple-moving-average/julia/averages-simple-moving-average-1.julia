SMA(N) = let buffer = Number[]
                  x -> (push!(buffer, x) ; mean(buffer[max(1,end-N+1):end]))
                end
